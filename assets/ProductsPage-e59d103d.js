import{c as g,k as u,j as t,r as B,d as $,u as N,J as R,F as D,m as L,n as A,I as C,K as T,M as F,N as z,O as V,B as P,L as W,f as G,h as Q,P as q,T as K,Q as U}from"./index-efb80fee.js";const Y="_form_container_tojwr_1",J="_form_container_input_tojwr_24",H="_input_tojwr_28",X="_button_form_tojwr_55",Z="_button_close_tojwr_65",tt={form_container:Y,form_container_input:J,input:H,button_form:X,button_close:Z},st="_dropdown_vsv3g_1",et="_dropdown_button_vsv3g_5",nt="_dropdown_list_vsv3g_38",ot="_dropdown_list_visible_vsv3g_60",ct="_dropdown_item_vsv3g_75",it="_dropdown_input_vsv3g_98",rt={dropdown:st,dropdown_button:et,dropdown_list:nt,dropdown_list_visible:ot,dropdown_item:ct,dropdown_input:it},S=g.bind(rt),M=({value:s,customSelectStyle:e,customListSelectStyle:n,handleCategoryChange:o})=>{const[d,r]=u.useState(!1),[_,c]=u.useState("Categories"),i=(a=>a.charAt(0).toUpperCase()+a.slice(1))(_),w=()=>{r(!d)},y=a=>{const j=a.target.getAttribute("data-value");c(j),r(!d),o(j)},b=a=>{a.code==="Escape"&&r(!1)};return u.useEffect(()=>(window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)})),t.jsx("div",{className:S("form_group"),children:t.jsxs("div",{className:S("dropdown"),children:[t.jsx("button",{type:"button",style:e||{},onClick:w,className:S("dropdown_button"),children:i}),t.jsx("ul",{style:n||{},className:S(d?"dropdown_list":"dropdown_list_visible"),children:s&&s.map(a=>t.jsx("li",{onClick:y,className:S("dropdown_item"),"data-value":a,children:a},a))})]})})},k=s=>s.products.products,at=s=>s.products.categories,v=g.bind(tt),lt=()=>{const[s,e]=u.useState(""),n=B.useMediaQuery({minWidth:768}),o=$(),{list:d}=N(at),{filterCategory:r}=N(k),_=m=>{const E=m.target.value;e(E)},c=()=>{e("")},h=m=>{const E=r&&r.filter(O=>O.category==m);o(T(E))},i=m=>{switch(m){case"Recommended":o(V(2));break;case"Not recommended":o(z(2));break;default:o(F(""))}},w=()=>{o(F(s))},y={stroke:"#EFEDE8"},b={stroke:"#E6533C",strokeWidth:4},j={width:n?204:173},x={height:112,overflow:"visible"},f=["All","Recommended","Not recommended"];return u.useEffect(()=>{o(R())},[o]),t.jsx(t.Fragment,{children:t.jsx(D,{initialValues:{search:""},onSubmit:w,children:t.jsxs(L,{className:v("form_container"),children:[t.jsxs("div",{className:v("form_container_input"),children:[t.jsx(A,{className:v("input"),type:"text",name:"search",value:s,autoComplete:"off",autoFocus:!0,placeholder:"Search",onChange:_}),s&&t.jsx("button",{type:"button",className:v("button_close"),onClick:c,children:t.jsx(C,{iconId:"icon-close",w:15,h:17,customStyles:b})}),t.jsx("button",{className:v("button_form"),type:"submit",children:t.jsx(C,{iconId:"icon-search",w:18,h:18,customStyles:y})})]}),t.jsx(M,{value:d,handleCategoryChange:h}),t.jsx(M,{value:f,customSelectStyle:j,customListSelectStyle:x,handleCategoryChange:i})]})})})},dt="_not_find_text_wm4ss_1",_t="_item_wm4ss_20",ut="_item_container_wm4ss_45",mt="_diet_wm4ss_51",pt="_button_container_wm4ss_62",ht="_text_wm4ss_69",xt="_green_wm4ss_76",gt="_red_wm4ss_87",bt="_button_wm4ss_62",jt="_title_container_wm4ss_108",wt="_title_wm4ss_108",yt="_item_list_container_wm4ss_125",ft={not_find_text:dt,item:_t,item_container:ut,diet:mt,button_container:pt,text:ht,green:xt,red:gt,button:bt,title_container:jt,title:wt,item_list_container:yt},l=g.bind(ft),St=({open:s})=>{const e=$(),{items:n}=N(k),o="",d=2;u.useEffect(()=>{e(F(o))},[e]);const r={backgroundColor:" #EFA082",width:24,height:24,borderRadius:50},_={marginLeft:8};return console.log("item:",n),t.jsx(t.Fragment,{children:n?n&&n.map(c=>{const i=!c.groupBloodNotAllowed[d];return t.jsxs("li",{className:l("item"),children:[t.jsxs("div",{className:l("item_container"),children:[t.jsx("p",{className:l("diet"),children:"DIET"}),t.jsxs("div",{className:l("button_container"),children:[t.jsx("p",{className:l("text",{green:i,red:!i}),children:i?" Recommended":"Not Recommended"}),t.jsxs("button",{className:l("button"),onClick:()=>s(c.title,c.calories,c._id),children:["Add",t.jsx(C,{iconId:"icon-next",w:20,h:20,customStyles:_})]})]})]}),t.jsxs("div",{className:l("title_container"),children:[t.jsx(C,{iconId:"icon-run",w:12,h:14,customStyles:r}),t.jsx("h2",{className:l("title"),children:c.title})]}),t.jsxs("div",{className:l("item_list_container"),children:[t.jsxs("p",{children:["Calories:",t.jsx("span",{className:l("list_text"),children:c.calories})]}),t.jsxs("p",{children:["Category:",t.jsx("span",{className:l("list_text"),children:c.category})]}),t.jsxs("p",{children:["Weight:",t.jsx("span",{className:l("list_text"),children:c.weight})]})]})]},c.title)}):t.jsxs("div",{className:l("not_find_text"),children:[t.jsxs("p",{children:["Sorry, no results were found"," ",t.jsx("span",{children:"for the product filters you selected. You may want to consider other search options to find the product you want. Our range is wide and you have the opportunity to find more options that suit your needs."})]}),t.jsx("p",{children:"Try changing the search parameters."})]})})},vt="_list_16ygl_1",Nt={list:vt},Ct=g.bind(Nt),Et=({open:s})=>{const{items:e}=N(k),n=e&&e.length===0?{overflowY:"auto"}:{};return t.jsx("ul",{className:Ct("list"),style:n,children:t.jsx(St,{open:s})})},It="_products_page_container_145ro_1",Ft={products_page_container:It},Pt="_input_12csy_1",$t="_input_container_12csy_27",kt="_button_container_12csy_67",Mt="_title_calories_12csy_73",Bt="_inputs_12csy_85",Dt="_product_12csy_96",Lt="_input__title_12csy_111",At="_container_12csy_122",Ot={input:Pt,"input_container-grams":"_input_container-grams_12csy_27",input_container:$t,"input-grams":"_input-grams_12csy_41",button_container:kt,title_calories:Mt,inputs:Bt,product:Dt,input__title:Lt,container:At},Rt="_successModal_856xh_1",Tt="_title_calories_856xh_35",zt="_button_856xh_49",Vt={successModal:Rt,title_calories:Tt,button:zt},I=g.bind(Vt),Wt=({onClose:s,calories:e})=>{const n={marginLeft:6,fill:"#EFEDE84D",stroke:"#EFEDE84D"},o={marginBottom:"28px",fontSize:"16px"};return t.jsxs("div",{className:I("successModal"),children:[t.jsx("h2",{children:"Well done"}),t.jsxs("p",{className:I("title_calories"),children:["Calories: ",t.jsx("span",{children:e})]}),t.jsx(P,{label:"Next product",action:s,customContainerStyles:o,buttonStyles:"orange"}),t.jsxs("button",{className:I("button"),children:[t.jsx(W,{to:"/diary",children:"To the diary"}),t.jsx(C,{iconId:"icon-arrow-big",w:16,h:16,customStyles:n})]})]})},p=g.bind(Ot),Gt=({close:s,product:e})=>{const n=$(),o=N(x=>x.diary.selectedDate),[d,r]=u.useState(!1),[_,c]=u.useState(0),h=G({grams:Q().required("Grams is required").positive("Grams must be a positive number").integer("Grams must be an integer")}),i=B.useMediaQuery({minWidth:768}),w={fontSize:16,width:151,height:i?52:42,padding:"12px 32px",color:"rgba(239, 237, 232, 1)"},y={fontSize:i?20:16,width:i?142:121,padding:"12px 36px",height:i?52:42},b={grams:""},a=x=>{const f=e._id;n(q({id:f,date:o,weight:x.grams})).then(()=>{r(!0)})},j=()=>{r(!1),s()};return t.jsx(t.Fragment,{children:d?t.jsx(Wt,{onClose:j,calories:_}):t.jsx("div",{className:p("container"),children:t.jsx(D,{initialValues:b,onSubmit:a,validationSchema:h,children:({values:x,handleSubmit:f})=>{const m=Math.round(e.cal/100*x.grams);return u.useEffect(()=>{c(m)},[m]),t.jsx(L,{onSubmit:f,children:t.jsxs("div",{className:p("product_modal"),children:[t.jsxs("div",{className:p("inputs"),children:[t.jsx("div",{className:p("product"),children:e.name}),t.jsxs("div",{className:p("input_container-grams"),children:[t.jsx(A,{type:"text",id:"grams",name:"grams",className:p("input-grams")}),t.jsx("span",{className:p("input__title"),children:"grams"})]})]}),t.jsxs("p",{className:p("title_calories"),children:["Calories: ",_]}),t.jsxs("div",{className:p("button_container"),children:[t.jsx(P,{label:"Add to diary",type:"submit",customContainerStyles:w}),t.jsx(P,{label:"Cancel",action:s,customContainerStyles:y,buttonStyles:"gray"})]})]})})}})})})},Qt=g.bind(Ft),Kt=()=>{const[s,e]=u.useState(!1),[n,o]=u.useState({}),d={},r=(c,h,i)=>{o({name:c,cal:h,_id:i}),e(!0)},_=()=>{e(!1)};return t.jsxs("div",{children:[t.jsxs("div",{className:Qt("products_page_container"),children:[t.jsx(K,{title:"Products",customContainerStyles:d}),t.jsx(lt,{})]}),t.jsx(Et,{open:r}),s&&t.jsx(U,{customClose:_,children:t.jsx(Gt,{close:_,product:n})})]})};export{Kt as default};
